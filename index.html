
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart ATM</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #f3a683, #786fa6);
      color: white;
      height: 100vh;
      overflow: hidden;
      transition: background 0.5s, color 0.5s;
    }

    .center-box {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    .container, .atm-container {
      background: rgba(0, 0, 0, 0.7);
      padding: 25px;
      border-radius: 12px;
      width: 350px;
      max-width: 90vw;
      text-align: center;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
      text-align: center;
    }

    button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
      background-color: #3498db;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.9;
    }

    .atm-container { display: none; }

    .settings-icon, .send-icon {
      position: fixed;
      top: 15px;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 22px;
      cursor: pointer;
      z-index: 999;
    }

    .settings-icon { right: 15px; }
    .send-icon { left: 15px; }

    .settings-panel {
      display: none;
      position: fixed;
      top: 70px;
      right: 15px;
      background: #2f3640;
      padding: 15px;
      border-radius: 10px;
      color: white;
      z-index: 999;
      width: 200px;
    }

    .settings-panel label {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
    }

    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 250px;
      text-align: center;
      color: black;
      z-index: 999;
    }

    .modal input {
      width: 90%;
      margin: 10px 0;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal button {
      margin: 5px;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .dark-mode {
      background: #2c3e50 !important;
      color: #ecf0f1 !important;
    }
  </style>
</head>
<body>

  <!-- Floating Buttons -->
  <div class="send-icon" onclick="openSendModal()">üí∏</div>
  <div class="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</div>

  <!-- Settings Panel -->
  <div class="settings-panel" id="settingsPanel">
    <label>Sound <input type="checkbox" id="soundToggle" onchange="saveSetting('sound')"></label>
    <label>Vibration <input type="checkbox" id="vibrationToggle" onchange="saveSetting('vibration')"></label>
    <label>Dark Mode <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()"></label>
  </div>

  <div class="center-box">
    <!-- Login -->
    <div class="container" id="loginSection">
      <h2>üè¶ Bank Login</h2>
      <select id="loginMethod">
        <option value="account">Account Number</option>
        <option value="phone">Phone Number</option>
        <option value="email">Email</option>
      </select>
      <input type="text" id="loginInput" placeholder="Enter details">
      <input type="password" id="passwordInput" placeholder="Enter 4-digit password">
      <button onclick="login()">Login</button>
      <p id="loginMessage" style="color: red;"></p>
    </div>

    <!-- ATM UI -->
    <div class="atm-container" id="atmSection">
      <h2>Welcome, <span id="userName"></span></h2>
      <button onclick="showPasswordModal('balance')">Check Balance</button>
      <button onclick="showPasswordModal('deposit')">Deposit</button>
      <button onclick="showPasswordModal('withdraw')">Withdraw</button>
      <button onclick="logout()">Logout</button>
    </div>
  </div>

  <!-- Modals -->
  <div class="modal" id="passwordModal">
    <h3>Enter Password</h3>
    <input type="password" id="passwordEntry">
    <button onclick="validatePassword()">Submit</button>
    <button onclick="closeModal('passwordModal')">Cancel</button>
  </div>

  <div class="modal" id="amountModal">
    <h3>Enter Amount</h3>
    <input type="number" id="amountEntry">
    <button onclick="processTransaction()">Submit</button>
    <button onclick="closeModal('amountModal')">Cancel</button>
  </div>

  <div class="modal" id="balanceModal">
    <h3>Your Balance</h3>
    <p id="balanceDisplay"></p>
    <button onclick="closeModal('balanceModal')">Close</button>
  </div>

  <div class="modal" id="sendModal">
    <h3>Send Money</h3>
    <input type="text" id="receiverPhone" placeholder="Recipient Phone">
    <input type="number" id="sendAmount" placeholder="Amount">
    <button onclick="sendMoney()">Send</button>
    <button onclick="closeModal('sendModal')">Cancel</button>
  </div>

  <script>
    const customers = [
      { name: "Aarav Sharma", account: "1001", phone: "9876543210", email: "aarav@email.com", password: "1234", balance: 10000 },
      { name: "Priya Verma", account: "1002", phone: "8765432109", email: "priya@email.com", password: "5678", balance: 20000 },
      { name: "Kunal Patil", account: "1003", phone: "7654321098", email: "kunal@email.com", password: "4321", balance: 15000 }
    ];

    let currentUser = null;
    let transactionType = "";

    function login() {
      const method = document.getElementById("loginMethod").value;
      const input = document.getElementById("loginInput").value.trim();
      const password = document.getElementById("passwordInput").value.trim();
      const user = customers.find(c => c[method] === input && c.password === password);
      if (user) {
        currentUser = user;
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("atmSection").style.display = "block";
        document.getElementById("userName").textContent = user.name;
      } else {
        document.getElementById("loginMessage").textContent = "Invalid credentials!";
      }
    }

    function logout() {
      location.reload();
    }

    function toggleSettings() {
      const panel = document.getElementById("settingsPanel");
      panel.style.display = panel.style.display === "block" ? "none" : "block";
    }

    function saveSetting(key) {
      localStorage.setItem(key, document.getElementById(key + "Toggle").checked);
    }

    function toggleDarkMode() {
      const dark = document.getElementById("darkModeToggle").checked;
      document.body.classList.toggle("dark-mode", dark);
    }

    function showPasswordModal(type) {
      transactionType = type;
      document.getElementById("passwordEntry").value = "";
      document.getElementById("passwordModal").style.display = "block";
    }

    function validatePassword() {
      const input = document.getElementById("passwordEntry").value;
      if (input !== currentUser.password) return alert("Wrong password");
      closeModal('passwordModal');
      if (transactionType === "balance") {
        document.getElementById("balanceDisplay").textContent = "‚Çπ" + currentUser.balance;
        document.getElementById("balanceModal").style.display = "block";
      } else {
        document.getElementById("amountEntry").value = "";
        document.getElementById("amountModal").style.display = "block";
      }
    }

    function processTransaction() {
      const amt = parseInt(document.getElementById("amountEntry").value);
      if (isNaN(amt) || amt <= 0) return alert("Enter valid amount");
      if (transactionType === "deposit") {
        currentUser.balance += amt;
      } else if (transactionType === "withdraw") {
        if (amt > currentUser.balance) return alert("Insufficient balance");
        currentUser.balance -= amt;
      }
      closeModal("amountModal");
    }

    function openSendModal() {
      if (!currentUser) return alert("Please login first");
      document.getElementById("sendModal").style.display = "block";
    }

    function sendMoney() {
      const phone = document.getElementById("receiverPhone").value.trim();
      const amt = parseInt(document.getElementById("sendAmount").value);
      const recipient = customers.find(c => c.phone === phone);
      if (!recipient || recipient === currentUser) return alert("Invalid recipient");
      if (isNaN(amt) || amt <= 0 || amt > currentUser.balance) return alert("Check amount");
      currentUser.balance -= amt;
      recipient.balance += amt;
      closeModal("sendModal");
      alert("Sent ‚Çπ" + amt + " to " + recipient.name);
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    window.onload = () => {
      ["sound", "vibration", "darkMode"].forEach(key => {
        const val = localStorage.getItem(key) === "true";
        document.getElementById(key + "Toggle").checked = val;
        if (key === "darkMode" && val) document.body.classList.add("dark-mode");
      });
    };
  </script>
</body>
</html>
